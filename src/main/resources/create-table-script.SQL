BEGIN;
CREATE TABLE IF NOT EXISTS users
(
    id BIGSERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS cards
(
id BIGSERIAL PRIMARY KEY,
title VARCHAR(150) NOT NULL,
number VARCHAR(200) NOT NULL,
fk_cards_users BIGINT,
FOREIGN KEY (fk_cards_users) REFERENCES users (id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS products
(
id BIGSERIAL PRIMARY KEY,
title VARCHAR(150) NOT NULL,
price INTEGER
);

CREATE TABLE IF NOT EXISTS users_products
(
user_id BIGINT,
product_id BIGINT,
FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE,
FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE
);
COMMIT;